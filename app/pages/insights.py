import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö


@st.cache
def load_data():
    return pd.read_csv('data/youtube_channel_real_performance_analytics.csv')


data = load_data()

st.title("üìä –ò–Ω—Å–∞–π—Ç—ã –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ YouTube –ö–∞–Ω–∞–ª–∞")

# 1. –ì—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
st.subheader("1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤")
st.write("–ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–∏—Å–ª–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.")
fig1 = px.scatter(
    data,
    x='Subscribers',
    y='Views',
    color='Month',
    size='Views',
    hover_data=['Views'],
    title="–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤",
    labels={"Subscribers": "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏", "Views": "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã"}
)
st.plotly_chart(fig1)

# 2. –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º
st.subheader("2. –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –ø–æ –º–µ—Å—è—Ü–∞–º")
st.write("–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–∞ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü.")
if 'Month' in data.columns and 'Estimated Revenue (USD)' in data.columns:
    fig2 = px.bar(
        data,
        x='Month',
        y='Estimated Revenue (USD)',
        title="–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º",
        labels={"Month": "–ú–µ—Å—è—Ü", "Estimated Revenue (USD)": "–î–æ—Ö–æ–¥ (USD)"},
        color='Month'
    )
    st.plotly_chart(fig2)
else:
    st.write("–î–∞–Ω–Ω—ã–µ –æ –∑–∞—Ä–∞–±–æ—Ç–∫–µ –ø–æ –º–µ—Å—è—Ü–∞–º –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.")

# 3. –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
st.subheader("3. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤")
st.write("–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∞—è, –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –Ω–∞ –∫–∞–Ω–∞–ª–µ.")
fig3 = px.histogram(
    data,
    x='Views',
    nbins=50,
    title="–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤",
    labels={"Views": "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã"}
)
st.plotly_chart(fig3)

# 4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
st.subheader("4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤")
st.write("–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∏—Å–ª–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.")
if 'New Comments' in data.columns:
    fig4 = px.scatter(
        data,
        x='Subscribers',
        y='New Comments',
        color='Month',
        size='Views',
        hover_data=['New Comments'],
        title="–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤",
        labels={"Subscribers": "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏", "New Comments": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"}
    )
    st.plotly_chart(fig4)
else:
    st.write("–î–∞–Ω–Ω—ã–µ –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.")

# 5. Boxplot –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º
st.subheader("5. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º")
st.write("Boxplot –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–∞—Ä—å–∏—Ä—É—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Å—è—Ü–∞.")
if 'Month' in data.columns:
    fig5 = px.box(
        data,
        x='Month',
        y='Views',
        color='Month',
        title="Boxplot –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º",
        labels={"Month": "–ú–µ—Å—è—Ü", "Views": "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã"}
    )
    st.plotly_chart(fig5)
else:
    st.write("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º.")

# 6. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
st.subheader("6. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏")
st.write("–õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.")
if 'Video Publish Time' in data.columns:
    data['Video Publish Time'] = pd.to_datetime(data['Video Publish Time'])
    fig6 = px.line(
        data,
        x='Video Publish Time',
        y='Views',
        title="–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏",
        labels={"Video Publish Time": "–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏", "Views": "–ü—Ä–æ—Å–º–æ—Ç—Ä—ã"}
    )
    st.plotly_chart(fig6)
else:
    st.write("–î–∞–Ω–Ω—ã–µ –æ –≤—Ä–µ–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.")
